AFRAME.registerComponent("blink-teleportation",{schema:{camera:{type:"selector",default:"#cam"},cameraRig:{type:"selector",default:"#camRig"},deviceButtons:{default:["click","mousedown","triggerdown"]},cursor:{type:"string",default:"#my-cursor"},raycasterObjects:{type:"string",default:".clickable"},dof:{type:"number",default:6},hand:{type:"string",default:"right"},color:{type:"string",default:"#000000"},pos:{type:"vec3"},dur:{type:"number",default:250},hide:{type:"boolean",default:!1}},init:function(){var e=this.el,a=this.data,t=AFRAME.utils.device.isMobileVR(),r=AFRAME.utils.device.checkHeadsetConnected(),i=document.querySelectorAll("[blink-teleportation]");if(t||r){if(t||r)if(3===a.dof){var c=document.createElement("a-entity");c.setAttribute("laser-controls","hand",a.hand),c.setAttribute("raycaster","objects",a.raycasterObjects),a.cameraRig.appendChild(c)}else if(6===a.dof){var s=document.createElement("a-entity");s.setAttribute("laser-controls","hand","right"),s.setAttribute("raycaster","objects",a.raycasterObjects);var n=document.createElement("a-entity");n.setAttribute("laser-controls","hand","left"),n.setAttribute("raycaster","objects",a.raycasterObjects),a.cameraRig.appendChild(s),a.cameraRig.appendChild(n)}}else{var o=document.createElement("a-cursor");o.setAttribute("raycaster","objects",a.raycasterObjects),a.camera.appendChild(o)}var l=document.createElement("a-image");l.setAttribute("material",{color:a.color,opacity:0}),l.setAttribute("animation",{dur:a.dur,easing:"easeInOutQuad"}),l.object3D.position.z=-.1,a.camera.appendChild(l),a.deviceButtons.forEach(function(t){e.addEventListener(t,function(){l.setAttribute("animation",{property:"material.opacity",from:0,to:1}),setTimeout(function(){a.cameraRig.setAttribute("position",a.pos);for(var t=0;t<i.length;t++)i[t].setAttribute("class","clickable"),i[t].setAttribute("visible","true");e.setAttribute("class","not-clickable"),!0===a.hide&&e.setAttribute("visible","false"),e.emit("position-changed")},a.dur)})}),e.addEventListener("position-changed",function(){l.setAttribute("animation",{from:1,to:0})})}});
